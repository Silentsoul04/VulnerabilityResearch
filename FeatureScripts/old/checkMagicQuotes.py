import os
import re
import fileRetriever 

def checkForMagicQuotes(files):
    '''checks if magic quotes are turned on.'''
    '''magic_quotes_gpc() may not be directly called, but get_magic_quotes_gpc() may'''
    #regex pattern
    pattern = re.compile("magic_quotes") 
    
    fileSet = []

    for fileName in files:
        with open(fileName, encoding="utf8") as file:
            #boolean to check if function is found
            statementFound = False

            for i, line in enumerate(file): #[(0, line), (1, line)]
                for match in re.finditer(pattern, line):
                    statementFound = True

            if statementFound:
                fileAttr = [fileName, True]
                fileSet.append(fileAttr)
            else:
                fileAttr = [fileName, False]
                fileSet.append(fileAttr)

    print(fileSet)
        
    

if __name__ == "__main__":
    fileSet = fileRetriever.getFileSet()
    checkForMagicQuotes(fileSet)
