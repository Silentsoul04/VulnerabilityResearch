import re

#class for tokenizing php code
class PHPParser:
    #def __init__(self, filename):
    def __init__(self, filetext):
        # read php file
        self._source = filetext

        syntax = [
            r'/\*.*?\*/',
            r'".*?"',
            r'\'.*?\'',
            r'\$[\w\d_]+', # variable name
            r'\w+', # function name
            r'return',
            r'<\?php',
            r'=>',
            r'\?>',
            r'\[',
            r'\]',
            r',',
            r';',
            r'\(',
            r'\)',
            r'\.',
            r'\n',
            r'\s',
            r'=',
            r'\W',
        ]

        s = r'(' + r'|'.join(syntax) + r')'
        print(s)
        #tokens = re.split(s, self._source, re.DOTALL | re.M | re.I | re.UNICODE)
        #tokens = re.findall(s, self._source, re.DOTALL | re.M | re.I | re.UNICODE)
        self.tokens = re.findall(s, self._source, re.DOTALL | re.M | re.I | re.UNICODE)

    def printTokens(self):
        for token in self.tokens:
            print(token)


if __name__ == '__main__':
    #p = PHPParser('../FileSet/Nonvulnerable/wikiwiki.theme.inc')
    pass
    
